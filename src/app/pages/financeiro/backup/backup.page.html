<ion-header>
  <ion-toolbar color="danger">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/financeiro"></ion-back-button>
    </ion-buttons>
    <ion-title>Backup & Limpeza</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true" class="ion-padding">
  <!-- Se√ß√£o de Backup -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="download-outline"></ion-icon>
        Gerar Backup
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <div *ngIf="isDatePickerVisible">
        <ion-item>
          <ion-label position="stacked">Data In√≠cio</ion-label>
          <ion-datetime presentation="date" [(ngModel)]="dataInicio"></ion-datetime>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Data Fim</ion-label>
          <ion-datetime presentation="date" [(ngModel)]="dataFim"></ion-datetime>
        </ion-item>
      </div>

      <ion-button *ngIf="!isDatePickerVisible" expand="block" fill="outline" (click)="toggleDatePicker()">
        <ion-icon name="calendar-outline" slot="start"></ion-icon>
        Selecionar Per√≠odo
      </ion-button>

      <ion-button *ngIf="isDatePickerVisible" expand="block" fill="outline" (click)="toggleDatePicker()">
        <ion-icon name="calendar-outline" slot="start"></ion-icon>
        Ocultar Seletor
      </ion-button>

      <ion-item lines="none">
        <ion-checkbox [(ngModel)]="compartilharDepois" slot="start"></ion-checkbox>
        <ion-label>
          <h3>Compartilhar ap√≥s salvar</h3>
          <p>Abre menu de compartilhamento</p>
        </ion-label>
      </ion-item>

      <ion-button expand="block" color="primary" (click)="gerarBackup()">
        <ion-icon name="download" slot="start"></ion-icon>
        Gerar Backup
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Se√ß√£o de Limpeza -->
  <ion-card>
    <ion-card-header>
      <ion-card-title color="danger">
        <ion-icon name="trash-outline"></ion-icon>
        Limpeza Geral
      </ion-card-title>
      <ion-card-subtitle>
        ‚ö†Ô∏è Use com extrema cautela
      </ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <ion-text color="medium">
        <p>
          <strong>Esta fun√ß√£o remove TODOS os dados das seguintes tabelas:</strong>
        </p>
        <ul>
          <li>Pedidos</li>
          <li>Caixa</li>
          <li>Sangrias</li>
          <li>Contas</li>
          <li>Estoque</li>
        </ul>
        <p>
          <ion-text color="danger">
            <strong>Recomendado: Fa√ßa um backup completo antes de usar esta fun√ß√£o!</strong>
          </ion-text>
        </p>
      </ion-text>

      <ion-button expand="block" color="danger" fill="outline" (click)="iniciarLimpezaGeral()">
        <ion-icon name="nuclear-outline" slot="start"></ion-icon>
        Iniciar Limpeza Geral
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Informa√ß√µes -->
  <ion-card>
    <ion-card-content>
      <ion-text color="medium">
        <h3>üí° Dicas importantes:</h3>
        <ul>
          <li>Arquivos s√£o salvos na pasta <strong>Documents</strong> do dispositivo</li>
          <li>Use "Compartilhar ap√≥s salvar" para facilitar o acesso</li>
          <li>A limpeza geral √© irrevers√≠vel - sempre fa√ßa backup primeiro</li>
          <li>Recomenda-se fazer limpeza a cada 3-6 meses</li>
        </ul>
      </ion-text>
    </ion-card-content>
  </ion-card>
</ion-content>